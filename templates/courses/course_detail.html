{% extends 'base.html' %}

{% load static %}


{% block style %}

<style>
/* Internal CSS styles for the template */
.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
  background-color: #f8f8f8;
  border: 1px solid #ddd;
  border-radius: 5px;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
}

.course-title {
  font-size: 28px;
  color: #333;
  margin-bottom: 10px;
}

.course-description {
  color: #666;
}

.module-title {
  font-size: 20px;
  color: #11101d;
  margin-top: 20px;
}

.lesson-title {
  font-size: 18px;
  color: #11101d;
}

.assessment-title {
  font-size: 16px;
  color: #212529;
}

.notes-title {
  font-size: 14px;
  color: #11101d;
  margin-top: 10px;

}

/* Internal CSS styles for the custom navigation menu */
.custom-nav {
  background-color: #11101d;
  color: #ffffff;
  padding: 10px 0;
  text-align: center;
}

.custom-link {
  text-decoration: none;
  color: #ffffff;
  font-size: 18px;
  margin: 0 20px;
  position: relative;
  transition: color 0.3s;
}

.custom-link i {
  margin-right: 5px;
}

.custom-link-name {
  display: none;
  position: absolute;
  top: 25px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 14px;
  background-color: #212529;
  padding: 5px 10px;
  border-radius: 5px;
  opacity: 0;
  transition: opacity 0.3s;
}

.custom-link:hover {
  color: #28a745;
}

.custom-link:hover .custom-link-name {
  display: inline;
  opacity: 1;
}

  </style>

{% endblock style %}




{% block content %}

<nav class="custom-nav">
  <a href="{% url 'instructors:create_course' %}" class="custom-link">Create Course</a>
  <a href="{% url 'academy:user_dashboard' %}" class="custom-link">
    <i class='bx bx-grid-alt'></i>
    <span class="custom-link-name">Dashboard</span>
  </a>
  <a href="{% url 'academy:course_list' %}" class="custom-link">Course List</a>
</nav>

  <div class="container">
    <h1 class="course-title">{{ course.course_title }}</h1>
    <iframe width="1000" height="650" src="{{ course.video_url }}" frameborder="0" allowfullscreen></iframe>
    <p class="course-description">{{ course.description|safe }}</p>

    {% if is_enrolled %}
      <h2 class="section-title">Modules and Lessons</h2>
      <ul class="module-list">
        {% for module in modules %}
          <li class="module">
            <h6 class="module-title">{{ module.module_title }}</h6>
            <ul class="lesson-list">
              {% for lesson in module.lesson_set.all %}
                <li class="lesson">
                  <h6 class="lesson-title">{{ lesson.lesson_title }}</h6>
                  <p class="lesson-content">{{ lesson.content|safe }}</p>
                  <h5 class="lesson-assessment-title">Assessments</h5>
                  <ul class="assessment-list">
                    {% for assessment in assessments %}
                      {% if assessment.lesson == lesson %}
                        <li class="assessment-title">{{ assessment.title|safe }}</li>
                      {% endif %}
                    {% endfor %}
                  </ul>
                  <div class="notes">
                    <h4 class="notes-title">You can make notes while studying</h4>
                    <a href="{% url 'academy:notes' %}" class="notes-link">Click here to Make Notes</a>
                  </div>
                </li>
              {% endfor %}
            </ul>
          </li>
        {% endfor %}
      </ul>
    {% endif %}

    <ul class="assessment-ul">
      {% for assessment in assessments %}
        <li class="assessment">
          <a href="{% url 'academy:view_assessment' assessment.id %}" class="assessment-link">View Assessment</a> |
          <a href="{% url 'academy:take_assessment' assessment.id %}" class="assessment-link">Take Assessment</a>
          <div class="assessment-details">
            <ul>
              <li class="assessment-title">{{ assessment.title|safe }}</li>
            </ul>
          </div>
        </li>
      {% endfor %}
      <a href="{% url 'academy:projects' %}" class="projects-link">Projects</a>
    </ul>

    {% if is_enrolled %}
      <a href="{% url 'academy:course_detail' course.slug %}" class="btn btn-primary start-course-btn">Start Taking Course</a>
    {% else %}
      <form method="post" action="{% url 'academy:enroll_course' course.slug %}" class="enroll-form">
        {% csrf_token %}
        <button type="submit" class="btn btn-success enroll-btn">Enroll in Course</button>
      </form>
    {% endif %}

    {% if user == course.instructor %}
      <a href="{% url 'instructors:edit_course' slug=course.slug %}" class="btn btn-primary edit-course-btn">Edit Course</a>
      <form method="post" action="{% url 'instructors:delete_course' slug=course.slug %}" style="display: inline;">
        {% csrf_token %}
        <button type="submit" class="btn btn-danger delete-course-btn" onclick="return confirm('Are you sure you want to delete this course?')">Delete Course</button>
      </form>
    {% endif %}
  </div>
{% endblock %}
